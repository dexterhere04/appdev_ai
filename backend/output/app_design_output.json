{
  "vision": "```json\n{\n  \"theme_mood\": \"Serene Accomplishment. The app feels like a calm, sunlit space for focus. It's uplifting and encouraging, turning daily tasks from chores into mindful steps towards a goal. It's about gentle progress, not stressful hustle.\",\n  \"color_palette\": {\n    \"primary\": \"#2A9D8F (Persian Green - for core actions, calming and focused)\",\n    \"secondary\": \"#F4A261 (Sandy Brown - for highlights, progress bars, and celebration)\",\n    \"accent\": \"#E76F51 (Burnt Sienna - for motivational elements and urgent CTAs)\",\n    \"background\": \"#F8F9FA (Off-White - clean, airy, and easy on the eyes)\",\n    \"text\": \"#264653 (Charcoal Blue - dark, readable, and softer than pure black)\"\n  },\n  \"design_style\": \"Soft & Clean Minimalism. We will use generous white space, rounded corners on UI elements like cards and buttons, and subtle, fluid animations for feedback (e.g., a smooth check-off). Typography will be a clean, geometric sans-serif (like Poppins) to ensure clarity and a modern feel. Icons are simple and line-based to maintain a light aesthetic.\",\n  \"tone\": \"Your Supportive Mentor. The language is consistently positive, gentle, and celebratory. It guides without being demanding. Instead of 'Task Overdue,' it might say, 'Ready to give this another look?' It celebrates small wins and frames progress as a journey, not a race.\",\n  \"inspiration_references\": [\n    {\n      \"name\": \"Headspace\",\n      \"reason\": \"For its friendly, approachable UI, calming color palette, and use of soft illustrations to create a non-intimidating user experience.\"\n    },\n    {\n      \"name\": \"Todoist\",\n      \"reason\": \"For its clean, minimalist interface and powerful, intuitive task management. We aim for its functional clarity but with a warmer, more motivational layer.\"\n    },\n    {\n      \"name\": \"Fabulous\",\n      \"reason\": \"For its mastery of positive reinforcement, habit-building loops, and a celebratory tone that makes users feel accomplished.\"\n    }\n  ]\n}\n```",
  "ux": "```json\n{\n  \"screens\": [\n    {\n      \"name\": \"Today\",\n      \"description\": \"The primary dashboard and daily focus screen. It presents the user with their tasks for the day in a calm, manageable list. The goal is to feel focused, not overwhelmed.\",\n      \"purpose\": \"To provide immediate clarity on daily priorities and encourage gentle action.\"\n    },\n    {\n      \"name\": \"Journey\",\n      \"description\": \"The macro-view of the user's goals or projects. This screen visualizes long-term ambitions as a series of manageable projects, reinforcing the theme of gentle progress over time.\",\n      \"purpose\": \"To connect daily tasks to larger goals and provide a sense of purpose and direction.\"\n    },\n    {\n      \"name\": \"Progress\",\n      \"description\": \"A celebratory space that visualizes accomplishments. It includes streaks, completed task counts, and earned milestones to provide positive reinforcement and motivation.\",\n      \"purpose\": \"To celebrate small wins and make the user feel accomplished, reinforcing the 'Fabulous' app inspiration.\"\n    },\n    {\n      \"name\": \"Profile & Settings\",\n      \"description\": \"A simple screen for account management, notification preferences, and theme customization. The tone remains supportive, even in functional menus.\",\n      \"purpose\": \"To provide user control and personalization options in a clean, straightforward manner.\"\n    },\n    {\n      \"name\": \"Add/Edit Task\",\n      \"description\": \"A modal or dedicated screen for creating or modifying a task. The interface is clean and simple, reducing friction and making it easy to capture thoughts.\",\n      \"purpose\": \"To enable quick and effortless task creation, the core input loop of the app.\"\n    }\n  ],\n  \"navigation\": {\n    \"pattern\": \"Bottom Navigation Bar with a central Floating Action Button (FAB)\",\n    \"rationale\": \"This pattern provides persistent, immediate access to the app's core sections, which aligns with the 'calm' and 'focused' mood. It's a highly familiar and ergonomic pattern for mobile users. The FAB is reserved for the most common and positive action—adding a new task—making it feel inviting and central to the experience.\",\n    \"structure\": [\n      {\n        \"item\": \"Today\",\n        \"icon\": \"A simple line-based icon of a sun or a minimalist calendar day.\"\n      },\n      {\n        \"item\": \"Journey\",\n        \"icon\": \"A line-based icon of a path or a mountain range.\"\n      },\n      {\n        \"item\": \"FAB (Add Task)\",\n        \"icon\": \"A simple plus (+) sign. It uses the primary color (#2A9D8F) to stand out as the core action.\",\n        \"placement\": \"Centered, potentially slightly raised or overlapping the bottom bar.\"\n      },\n      {\n        \"item\": \"Progress\",\n        \"icon\": \"A line-based icon of a growing plant or a simple bar chart.\"\n      },\n      {\n        \"item\": \"Profile\",\n        \"icon\": \"A simple line-based icon of a person or a gear.\"\n      }\n    ]\n  },\n  \"components\": {\n    \"screen_today\": {\n      \"hierarchy\": [\n        \"Header: A gentle greeting ('Good morning, [Name]') and the current date. Uses 'text' color.\",\n        \"Motivational Card: An optional, dismissible card with a supportive quote. Uses 'accent' color (#E76F51) for the border or an icon to draw attention without being alarming.\",\n        \"Task List: A vertically scrolling list of Task Card components.\",\n        \"Task Card: A container with generous padding and rounded corners. Includes a custom checkbox, task title, and an optional tag for the associated 'Journey'. Background is 'background' color with a subtle border.\",\n        \"Checkbox: A circular interactive element. When checked, it fills with the 'primary' color (#2A9D8F) and triggers a subtle, fluid animation. The task text gets a soft strikethrough.\",\n        \"Empty State: If no tasks are present, displays a soft, Headspace-inspired illustration and gentle text like, 'A clear space for a calm day. Ready to add a focus?'\"\n      ]\n    },\n    \"screen_journey\": {\n      \"hierarchy\": [\n        \"Header: 'Your Journey'.\",\n        \"Journey List: A list of Journey Card components.\",\n        \"Journey Card: A larger card with rounded corners. Contains the Journey/Project title, a short description, and a Progress Bar.\",\n        \"Progress Bar: A visual indicator of completed tasks within the journey. The track is a light grey, and the fill uses the 'secondary' color (#F4A261) to represent warm, positive progress.\",\n        \"Empty State: An encouraging illustration and text like, 'What great things shall we begin?' with a clear CTA to create a new journey.\"\n      ]\n    },\n    \"screen_progress\": {\n      \"hierarchy\": [\n        \"Header: 'Your Progress'.\",\n        \"Stats Grid: A 2x2 grid of small cards displaying key metrics like 'Weekly Goal', 'Current Streak'. Uses 'secondary' color (#F4A261) for numerical highlights.\",\n        \"Milestones Section: A section titled 'Milestones Unlocked'.\",\n        \"Milestone Badge: A circular element containing a simple line-based icon. Unlocked badges are filled with the 'primary' or 'secondary' color, while locked ones are a soft grey outline. Tapping reveals a celebratory message.\"\n      ]\n    },\n    \"global_components\": {\n      \"Buttons\": \"All buttons have rounded corners. Primary CTAs (e.g., 'Save Task') use the 'primary' color (#2A9D8F) as a solid fill. Secondary actions are outlined with the 'primary' color or use plain 'text' color.\",\n      \"Input Fields\": \"Clean, minimalist fields with a simple bottom border that becomes the 'primary' color when focused. Text inside uses the 'text' color (#264653).\",\n      \"Typography\": \"Uses a clean, geometric sans-serif (like Poppins). Headings are bold and use the 'text' color. Body copy is regular weight and highly readable.\",\n      \"Icons\": \"Uniformly simple, light, and line-based to maintain the 'Soft & Clean Minimalism' aesthetic.\"\n    }\n  },\n  \"accessibility\": {\n    \"title\": \"Accessibility & Responsive Design Principles\",\n    \"principles\": [\n      {\n        \"name\": \"Color Contrast\",\n        \"description\": \"Ensure all text meets WCAG AA standards. The primary text color (#264653) on the background (#F8F9FA) has a high contrast ratio. For text on colored buttons (primary, accent), white or dark text will be used to guarantee readability.\"\n      },\n      {\n        \"name\": \"Semantic Elements\",\n        \"description\": \"Use semantic HTML/native mobile components for all interactive elements (buttons, links, inputs) to ensure proper functionality with screen readers and other assistive technologies.\"\n      },\n      {\n        \"name\": \"Touch Targets\",\n        \"description\": \"All interactive elements, including icons, list items, and buttons, will have a minimum touch target size of 44x44 points to be easily and accurately tapped.\"\n      },\n      {\n        \"name\": \"Focus States\",\n        \"description\": \"Provide clear, visible focus indicators for all interactive elements to aid keyboard-only navigation. The focus state could be a soft, glowing outline in the 'secondary' color.\"\n      },\n      {\n        \"name\": \"Labels and Alt-Text\",\n        \"description\": \"All icon-only buttons and meaningful images/illustrations will have clear, descriptive text labels or ARIA attributes for screen reader users.\"\n      },\n      {\n        \"name\": \"Responsive & Fluid Layout\",\n        \"description\": \"The design will be mobile-first, using a flexible grid system and relative units (rem, %). Components like cards and grids will reflow gracefully on larger screens (e.g., a single-column list on mobile becomes a multi-column grid on a tablet).\"\n      },\n      {\n        \"name\": \"Scalable Text\",\n        \"description\": \"Use relative units for font sizes to ensure that users can scale the text using their device's system settings without breaking the layout.\"\n      }\n    ]\n  }\n}\n```",
  "ui": "```json\n[\n  {\n    \"file\": \"lib/theme.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:google_fonts/google_fonts.dart';\n\n// Define custom colors\nclass AppColors {\n  static const Color primary = Color(0xFF2A9D8F); // Teal\n  static const Color secondary = Color(0xFFF4A261); // Orange\n  static const Color accent = Color(0xFFE76F51); // Darker Orange/Red\n  static const Color text = Color(0xFF264653); // Dark Blue/Green\n  static const Color background = Color(0xFFF8F9FA); // Light Grey\n  static const Color surface = Color(0xFFFFFFFF); // White\n  static const Color error = Color(0xFFB00020); // Standard Red for errors\n  static const Color success = Color(0xFF28A745); // Green for success\n  static const Color grey = Color(0xFFCED4DA); // Light Grey for borders/placeholders\n}\n\n// Define the application theme\nclass AppTheme {\n  static ThemeData get lightTheme {\n    // Generate a Material 3 ColorScheme from a seed color\n    final ColorScheme baseColorScheme = ColorScheme.fromSeed(\n      seedColor: AppColors.primary,\n      primary: AppColors.primary,\n      secondary: AppColors.secondary,\n      tertiary: AppColors.accent, // Using accent as tertiary\n      surface: AppColors.surface,\n      background: AppColors.background,\n      error: AppColors.error,\n      onPrimary: Colors.white, // Ensure good contrast for text on primary\n      onSecondary: Colors.white,\n      onSurface: AppColors.text,\n      onBackground: AppColors.text,\n      onError: Colors.white,\n      brightness: Brightness.light,\n    );\n\n    // Ensure primary color contrast for buttons (issue ACCESSIBILITY_COLOR_CONTRAST)\n    // The ColorScheme.fromSeed will generate onPrimary with sufficient contrast.\n    // If we were to manually set primary and onPrimary, we'd ensure:\n    // final Color customPrimary = Color(0xFF21887D); // Darkened primary for better contrast\n    // final Color customOnPrimary = Colors.white; // Or a very light grey if needed\n\n    final TextTheme baseTextTheme = GoogleFonts.poppinsTextTheme();\n\n    return ThemeData(\n      useMaterial3: true,\n      colorScheme: baseColorScheme,\n      scaffoldBackgroundColor: baseColorScheme.background,\n      appBarTheme: AppBarTheme(\n        backgroundColor: baseColorScheme.surface,\n        foregroundColor: baseColorScheme.onSurface,\n        elevation: 0,\n        centerTitle: false,\n        titleTextStyle: baseTextTheme.headlineSmall?.copyWith(\n          fontWeight: FontWeight.bold,\n          color: baseColorScheme.onSurface,\n        ),\n      ),\n      textTheme: baseTextTheme.copyWith(\n        displayLarge: baseTextTheme.displayLarge?.copyWith(color: baseColorScheme.onSurface),\n        displayMedium: baseTextTheme.displayMedium?.copyWith(color: baseColorScheme.onSurface),\n        displaySmall: baseTextTheme.displaySmall?.copyWith(color: baseColorScheme.onSurface),\n        headlineLarge: baseTextTheme.headlineLarge?.copyWith(color: baseColorScheme.onSurface),\n        headlineMedium: baseTextTheme.headlineMedium?.copyWith(color: baseColorScheme.onSurface),\n        headlineSmall: baseTextTheme.headlineSmall?.copyWith(color: baseColorScheme.onSurface),\n        titleLarge: baseTextTheme.titleLarge?.copyWith(color: baseColorScheme.onSurface),\n        titleMedium: baseTextTheme.titleMedium?.copyWith(color: baseColorScheme.onSurface),\n        titleSmall: baseTextTheme.titleSmall?.copyWith(color: baseColorScheme.onSurface),\n        bodyLarge: baseTextTheme.bodyLarge?.copyWith(color: baseColorScheme.onSurface),\n        bodyMedium: baseTextTheme.bodyMedium?.copyWith(color: baseColorScheme.onSurface),\n        bodySmall: baseTextTheme.bodySmall?.copyWith(color: baseColorScheme.onSurface),\n        labelLarge: baseTextTheme.labelLarge?.copyWith(color: baseColorScheme.onSurface),\n        labelMedium: baseTextTheme.labelMedium?.copyWith(color: baseColorScheme.onSurface),\n        labelSmall: baseTextTheme.labelSmall?.copyWith(color: baseColorScheme.onSurface),\n      ),\n      elevatedButtonTheme: ElevatedButtonThemeData(\n        style: ElevatedButton.styleFrom(\n          backgroundColor: baseColorScheme.primary,\n          foregroundColor: baseColorScheme.onPrimary,\n          shape: RoundedRectangleBorder(\n            borderRadius: BorderRadius.circular(12.0),\n          ),\n          padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\n          textStyle: baseTextTheme.labelLarge?.copyWith(fontWeight: FontWeight.bold),\n          minimumSize: const Size(44, 44), // Touch target size (ACCESSIBILITY_TOUCH_TARGETS)\n        ),\n      ),\n      textButtonTheme: TextButtonThemeData(\n        style: TextButton.styleFrom(\n          foregroundColor: baseColorScheme.primary,\n          shape: RoundedRectangleBorder(\n            borderRadius: BorderRadius.circular(12.0),\n          ),\n          padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\n          textStyle: baseTextTheme.labelLarge,\n          minimumSize: const Size(44, 44), // Touch target size (ACCESSIBILITY_TOUCH_TARGETS)\n        ),\n      ),\n      outlinedButtonTheme: OutlinedButtonThemeData(\n        style: OutlinedButton.styleFrom(\n          foregroundColor: baseColorScheme.primary,\n          side: BorderSide(color: baseColorScheme.primary),\n          shape: RoundedRectangleBorder(\n            borderRadius: BorderRadius.circular(12.0),\n          ),\n          padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\n          textStyle: baseTextTheme.labelLarge,\n          minimumSize: const Size(44, 44), // Touch target size (ACCESSIBILITY_TOUCH_TARGETS)\n        ),\n      ),\n      inputDecorationTheme: InputDecorationTheme(\n        filled: true,\n        fillColor: baseColorScheme.surface,\n        hintStyle: baseTextTheme.bodyLarge?.copyWith(color: baseColorScheme.onSurfaceVariant),\n        labelStyle: baseTextTheme.bodyLarge?.copyWith(color: baseColorScheme.onSurface),\n        floatingLabelStyle: baseTextTheme.bodyLarge?.copyWith(color: baseColorScheme.primary),\n        border: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(12.0),\n          borderSide: BorderSide.none, // No visible border by default\n        ),\n        enabledBorder: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(12.0),\n          borderSide: BorderSide(color: baseColorScheme.outlineVariant, width: 1.0),\n        ),\n        focusedBorder: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(12.0),\n          borderSide: BorderSide(color: baseColorScheme.primary, width: 2.0),\n        ),\n        errorBorder: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(12.0),\n          borderSide: BorderSide(color: baseColorScheme.error, width: 1.0),\n        ),\n        focusedErrorBorder: OutlineInputBorder(\n          borderRadius: BorderRadius.circular(12.0),\n          borderSide: BorderSide(color: baseColorScheme.error, width: 2.0),\n        ),\n        contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),\n      ),\n      checkboxTheme: CheckboxThemeData(\n        fillColor: MaterialStateProperty.resolveWith((states) {\n          if (states.contains(MaterialState.selected)) {\n            return baseColorScheme.primary;\n          }\n          return baseColorScheme.onSurfaceVariant.withOpacity(0.6); // Unchecked color\n        }),\n        checkColor: MaterialStateProperty.all(baseColorScheme.onPrimary),\n        shape: RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(4),\n        ),\n        side: BorderSide(\n          color: baseColorScheme.onSurfaceVariant.withOpacity(0.6),\n          width: 2,\n        ),\n      ),\n      cardTheme: CardTheme(\n        color: baseColorScheme.surface,\n        elevation: 0,\n        shape: RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(16.0),\n          side: BorderSide(color: baseColorScheme.outlineVariant, width: 0.5),\n        ),\n        margin: EdgeInsets.zero, // Cards will manage their own external padding\n      ),\n      bottomNavigationBarTheme: BottomNavigationBarThemeData(\n        backgroundColor: baseColorScheme.surface,\n        selectedItemColor: baseColorScheme.primary,\n        unselectedItemColor: baseColorScheme.onSurfaceVariant,\n        selectedLabelStyle: baseTextTheme.labelSmall?.copyWith(fontWeight: FontWeight.bold),\n        unselectedLabelStyle: baseTextTheme.labelSmall,\n        type: BottomNavigationBarType.fixed, // M3 NavigationBar uses fixed by default\n      ),\n      navigationBarTheme: NavigationBarThemeData( // M3 NavigationBar theme\n        backgroundColor: baseColorScheme.surface,\n        indicatorColor: baseColorScheme.primaryContainer, // M3 indicator color\n        labelTextStyle: MaterialStateProperty.resolveWith((states) {\n          final style = baseTextTheme.labelMedium;\n          return states.contains(MaterialState.selected)\n              ? style?.copyWith(color: baseColorScheme.onSurface, fontWeight: FontWeight.bold)\n              : style?.copyWith(color: baseColorScheme.onSurfaceVariant);\n        }),\n        iconTheme: MaterialStateProperty.resolveWith((states) {\n          return states.contains(MaterialState.selected)\n              ? IconThemeData(color: baseColorScheme.onPrimaryContainer)\n              : IconThemeData(color: baseColorScheme.onSurfaceVariant);\n        }),\n        height: 80, // M3 NavigationBar height\n      ),\n      floatingActionButtonTheme: FloatingActionButtonThemeData(\n        backgroundColor: baseColorScheme.primary,\n        foregroundColor: baseColorScheme.onPrimary,\n        shape: RoundedRectangleBorder(\n          borderRadius: BorderRadius.circular(16.0), // M3 FAB shape\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/main.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/app_scaffold.dart';\nimport 'package:gentle_progress/theme.dart';\n\nvoid main() {\n  runApp(const MyApp());\n}\n\nclass MyApp extends StatelessWidget {\n  const MyApp({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Gentle Progress',\n      theme: AppTheme.lightTheme,\n      home: const AppScaffold(),\n      debugShowCheckedModeBanner: false,\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/app_scaffold.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/screens/add_edit_task_screen.dart';\nimport 'package:gentle_progress/screens/journey_screen.dart';\nimport 'package:gentle_progress/screens/profile_settings_screen.dart';\nimport 'package:gentle_progress/screens/progress_screen.dart';\nimport 'package:gentle_progress/screens/today_screen.dart';\nimport 'package:gentle_progress/theme.dart';\n\nclass AppScaffold extends StatefulWidget {\n  const AppScaffold({super.key});\n\n  @override\n  State<AppScaffold> createState() => _AppScaffoldState();\n}\n\nclass _AppScaffoldState extends State<AppScaffold> {\n  int _selectedIndex = 0;\n\n  final List<Widget> _screens = [\n    const TodayScreen(),\n    const JourneyScreen(),\n    const ProgressScreen(),\n    const ProfileSettingsScreen(),\n  ];\n\n  void _onItemTapped(int index) {\n    setState(() {\n      _selectedIndex = index;\n    });\n  }\n\n  void _onAddTaskPressed() {\n    Navigator.of(context).push(\n      MaterialPageRoute(\n        builder: (context) => const AddEditTaskScreen(),\n        fullscreenDialog: true, // Typically modals are fullscreen dialogs on mobile\n      ),\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final colorScheme = Theme.of(context).colorScheme;\n\n    // MODERNIZE_NAVIGATION_BAR: Using NavigationBar (Material 3)\n    return Scaffold(\n      body: IndexedStack(\n        index: _selectedIndex,\n        children: _screens,\n      ),\n      floatingActionButton: FloatingActionButton(\n        onPressed: _onAddTaskPressed,\n        backgroundColor: AppColors.primary,\n        foregroundColor: colorScheme.onPrimary,\n        shape: const CircleBorder(), // Default FAB is circular\n        child: const Icon(Icons.add),\n      ),\n      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,\n      bottomNavigationBar: NavigationBar(\n        selectedIndex: _selectedIndex,\n        onDestinationSelected: _onItemTapped,\n        destinations: [\n          NavigationDestination(\n            icon: const Icon(Icons.wb_sunny_outlined),\n            selectedIcon: const Icon(Icons.wb_sunny),\n            label: 'Today',\n          ),\n          NavigationDestination(\n            icon: const Icon(Icons.alt_route_outlined),\n            selectedIcon: const Icon(Icons.alt_route),\n            label: 'Journey',\n          ),\n          NavigationDestination(\n            icon: const Icon(Icons.emoji_events_outlined),\n            selectedIcon: const Icon(Icons.emoji_events),\n            label: 'Progress',\n          ),\n          NavigationDestination(\n            icon: const Icon(Icons.person_outline),\n            selectedIcon: const Icon(Icons.person),\n            label: 'Profile',\n          ),\n        ],\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/empty_state_illustration.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\n\nclass EmptyStateIllustration extends StatelessWidget {\n  final String title;\n  final String message;\n  final IconData? icon;\n  final Widget? actionButton;\n\n  const EmptyStateIllustration({\n    super.key,\n    required this.title,\n    required this.message,\n    this.icon,\n    this.actionButton,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    return Center(\n      child: Padding(\n        padding: const EdgeInsets.all(32.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          crossAxisAlignment: CrossAxisAlignment.center,\n          children: [\n            if (icon != null) ...[\n              Icon(\n                icon,\n                size: 80,\n                color: colorScheme.onSurfaceVariant.withOpacity(0.6),\n              ),\n              const SizedBox(height: 24),\n            ],\n            Text(\n              title,\n              style: textTheme.headlineSmall?.copyWith(\n                color: colorScheme.onSurfaceVariant,\n                fontWeight: FontWeight.bold,\n              ),\n              textAlign: TextAlign.center,\n            ),\n            const SizedBox(height: 12),\n            Text(\n              message,\n              style: textTheme.bodyLarge?.copyWith(\n                color: colorScheme.onSurfaceVariant.withOpacity(0.8),\n              ),\n              textAlign: TextAlign.center,\n            ),\n            if (actionButton != null) ...[\n              const SizedBox(height: 24),\n              actionButton!,\n            ],\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/task_card.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/theme.dart';\n\nclass TaskCard extends StatelessWidget {\n  final String title;\n  final String? journeyTag;\n  final bool isCompleted;\n  final ValueChanged<bool?> onToggle;\n\n  const TaskCard({\n    super.key,\n    required this.title,\n    this.journeyTag,\n    required this.isCompleted,\n    required this.onToggle,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    // THEMING_INCONSISTENCY & ENHANCE_THEME_USAGE: Using ColorScheme roles\n    return Card(\n      margin: const EdgeInsets.symmetric(vertical: 8.0, horizontal: 16.0),\n      child: Padding(\n        padding: const EdgeInsets.symmetric(vertical: 12.0, horizontal: 16.0),\n        child: Row(\n          children: [\n            // REFACTOR_FOR_ACCESSIBILITY: Using standard Checkbox\n            SizedBox(\n              width: 44, // Ensure touch target size (ACCESSIBILITY_TOUCH_TARGETS)\n              height: 44,\n              child: Checkbox(\n                value: isCompleted,\n                onChanged: onToggle,\n                // Theming is handled by CheckboxThemeData in AppTheme\n              ),\n            ),\n            const SizedBox(width: 12),\n            Expanded(\n              child: Column(\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Text(\n                    title,\n                    style: textTheme.titleMedium?.copyWith(\n                      decoration: isCompleted ? TextDecoration.lineThrough : null,\n                      color: isCompleted\n                          ? colorScheme.onSurfaceVariant.withOpacity(0.6)\n                          : colorScheme.onSurface,\n                    ),\n                    overflow: TextOverflow.ellipsis,\n                    maxLines: 2,\n                  ),\n                  if (journeyTag != null) ...[\n                    const SizedBox(height: 4),\n                    Chip(\n                      label: Text(\n                        journeyTag!,\n                        style: textTheme.labelSmall?.copyWith(\n                          color: colorScheme.onSecondaryContainer, // Text on secondaryContainer\n                          fontWeight: FontWeight.w500,\n                        ),\n                      ),\n                      backgroundColor: colorScheme.secondaryContainer, // Background for tag\n                      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 0),\n                      visualDensity: VisualDensity.compact,\n                      materialTapTargetSize: MaterialTapTargetSize.shrinkWrap,\n                      shape: RoundedRectangleBorder(\n                        borderRadius: BorderRadius.circular(8),\n                      ),\n                    ),\n                  ],\n                ],\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/screens/today_screen.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/theme.dart';\nimport 'package:gentle_progress/widgets/empty_state_illustration.dart';\nimport 'package:gentle_progress/widgets/task_card.dart';\nimport 'package:intl/intl.dart'; // For date formatting\n\nclass TodayScreen extends StatefulWidget {\n  const TodayScreen({super.key});\n\n  @override\n  State<TodayScreen> createState() => _TodayScreenState();\n}\n\nclass _TodayScreenState extends State<TodayScreen> {\n  // Mock data for demonstration\n  List<Map<String, dynamic>> _tasks = [\n    {'id': '1', 'title': 'Meditate for 10 minutes', 'journey': 'Mindfulness', 'isCompleted': false},\n    {'id': '2', 'title': 'Review project proposal', 'journey': 'Work', 'isCompleted': false},\n    {'id': '3', 'title': 'Call mom', 'journey': 'Personal', 'isCompleted': false},\n    {'id': '4', 'title': 'Read 20 pages of \"Atomic Habits\"', 'journey': 'Growth', 'isCompleted': true},\n    {'id': '5', 'title': 'Plan next week\\'s meals', 'journey': 'Home', 'isCompleted': true},\n  ];\n\n  void _toggleTaskCompletion(String id, bool? value) {\n    setState(() {\n      final index = _tasks.indexWhere((task) => task['id'] == id);\n      if (index != -1) {\n        _tasks[index]['isCompleted'] = value ?? false;\n      }\n      // Re-sort to move completed tasks to the bottom\n      _tasks.sort((a, b) {\n        if (a['isCompleted'] == b['isCompleted']) return 0;\n        return a['isCompleted'] ? 1 : -1;\n      });\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    final todayTasks = _tasks.where((task) => !task['isCompleted']).toList();\n    final completedTasks = _tasks.where((task) => task['isCompleted']).toList();\n\n    return Scaffold(\n      body: CustomScrollView( // REFINE_LIST_STRUCTURE: Using CustomScrollView for sections\n        slivers: [\n          SliverAppBar(\n            backgroundColor: colorScheme.background,\n            surfaceTintColor: colorScheme.background, // Ensure no tint on scroll\n            elevation: 0,\n            floating: true,\n            flexibleSpace: FlexibleSpaceBar(\n              titlePadding: const EdgeInsets.only(left: 16.0, bottom: 16.0),\n              centerTitle: false,\n              title: Column(\n                mainAxisAlignment: MainAxisAlignment.end,\n                crossAxisAlignment: CrossAxisAlignment.start,\n                children: [\n                  Text(\n                    'Good morning, [Name]',\n                    style: textTheme.headlineSmall?.copyWith(\n                      fontWeight: FontWeight.bold,\n                      color: colorScheme.onSurface,\n                    ),\n                  ),\n                  Text(\n                    DateFormat('EEEE, MMMM d').format(DateTime.now()),\n                    style: textTheme.bodyMedium?.copyWith(\n                      color: colorScheme.onSurfaceVariant,\n                    ),\n                  ),\n                ],\n              ),\n            ),\n            expandedHeight: 120, // Adjust as needed\n          ),\n          SliverToBoxAdapter(\n            child: Padding(\n              padding: const EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0),\n              child: Card( // Motivational Card\n                color: colorScheme.surface,\n                shape: RoundedRectangleBorder(\n                  borderRadius: BorderRadius.circular(16.0),\n                  side: BorderSide(color: AppColors.accent.withOpacity(0.3), width: 1),\n                ),\n                child: Padding(\n                  padding: const EdgeInsets.all(16.0),\n                  child: Row(\n                    children: [\n                      Icon(Icons.lightbulb_outline, color: AppColors.accent),\n                      const SizedBox(width: 12),\n                      Expanded(\n                        child: Text(\n                          '“The journey of a thousand miles begins with a single step.”',\n                          style: textTheme.bodyMedium?.copyWith(\n                            fontStyle: FontStyle.italic,\n                            color: colorScheme.onSurfaceVariant,\n                          ),\n                        ),\n                      ),\n                      IconButton(\n                        icon: Icon(Icons.close, color: colorScheme.onSurfaceVariant.withOpacity(0.6)),\n                        onPressed: () {\n                          // TODO: Implement dismiss functionality\n                        },\n                        visualDensity: VisualDensity.compact,\n                        padding: EdgeInsets.zero,\n                        constraints: const BoxConstraints(),\n                      ),\n                    ],\n                  ),\n                ),\n              ),\n            ),\n          ),\n          if (todayTasks.isNotEmpty) ...[\n            SliverToBoxAdapter(\n              child: Padding(\n                padding: const EdgeInsets.fromLTRB(16.0, 24.0, 16.0, 8.0),\n                child: Text(\n                  'Today\\'s Focus',\n                  style: textTheme.titleLarge?.copyWith(fontWeight: FontWeight.bold),\n                ),\n              ),\n            ),\n            SliverList(\n              delegate: SliverChildBuilderDelegate(\n                (context, index) {\n                  final task = todayTasks[index];\n                  return TaskCard(\n                    title: task['title'],\n                    journeyTag: task['journey'],\n                    isCompleted: task['isCompleted'],\n                    onToggle: (value) => _toggleTaskCompletion(task['id'], value),\n                  );\n                },\n                childCount: todayTasks.length,\n              ),\n            ),\n          ],\n          if (completedTasks.isNotEmpty) ...[\n            SliverToBoxAdapter(\n              child: Padding(\n                padding: const EdgeInsets.fromLTRB(16.0, 24.0, 16.0, 8.0),\n                child: Text(\n                  'Completed',\n                  style: textTheme.titleLarge?.copyWith(fontWeight: FontWeight.bold),\n                ),\n              ),\n            ),\n            SliverList(\n              delegate: SliverChildBuilderDelegate(\n                (context, index) {\n                  final task = completedTasks[index];\n                  return TaskCard(\n                    title: task['title'],\n                    journeyTag: task['journey'],\n                    isCompleted: task['isCompleted'],\n                    onToggle: (value) => _toggleTaskCompletion(task['id'], value),\n                  );\n                },\n                childCount: completedTasks.length,\n              ),\n            ),\n          ],\n          if (_tasks.isEmpty)\n            SliverFillRemaining(\n              hasScrollBody: false,\n              child: EmptyStateIllustration(\n                icon: Icons.assignment_turned_in_outlined,\n                title: 'A clear space for a calm day.',\n                message: 'Ready to add a focus?',\n                actionButton: ElevatedButton.icon(\n                  onPressed: () {\n                    // TODO: Navigate to Add/Edit Task screen\n                  },\n                  icon: const Icon(Icons.add),\n                  label: const Text('Add your first task'),\n                ),\n              ),\n            ),\n          const SliverToBoxAdapter(child: SizedBox(height: 80)), // Space for FAB\n        ],\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/progress_bar.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\n\nclass ProgressBar extends StatelessWidget {\n  final double progress; // Value between 0.0 and 1.0\n  final Color trackColor;\n  final Color progressColor;\n\n  const ProgressBar({\n    super.key,\n    required this.progress,\n    required this.trackColor,\n    required this.progressColor,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return ClipRRect(\n      borderRadius: BorderRadius.circular(8.0),\n      child: LinearProgressIndicator(\n        value: progress.clamp(0.0, 1.0), // Ensure progress is within 0-1\n        minHeight: 10.0,\n        backgroundColor: trackColor,\n        valueColor: AlwaysStoppedAnimation<Color>(progressColor),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/journey_card.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/widgets/progress_bar.dart';\nimport 'package:gentle_progress/theme.dart';\n\nclass JourneyCard extends StatelessWidget {\n  final String title;\n  final String description;\n  final double progress; // 0.0 to 1.0\n\n  const JourneyCard({\n    super.key,\n    required this.title,\n    required this.description,\n    required this.progress,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    return Card(\n      margin: const EdgeInsets.symmetric(vertical: 8.0, horizontal: 16.0),\n      child: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Text(\n              title,\n              style: textTheme.titleLarge?.copyWith(\n                fontWeight: FontWeight.bold,\n                color: colorScheme.onSurface,\n              ),\n            ),\n            const SizedBox(height: 8),\n            Text(\n              description,\n              style: textTheme.bodyMedium?.copyWith(\n                color: colorScheme.onSurfaceVariant,\n              ),\n              maxLines: 3,\n              overflow: TextOverflow.ellipsis,\n            ),\n            const SizedBox(height: 16),\n            ProgressBar(\n              progress: progress,\n              trackColor: colorScheme.onSurfaceVariant.withOpacity(0.2), // Light grey track\n              progressColor: AppColors.secondary, // Secondary color for progress\n            ),\n            const SizedBox(height: 8),\n            Align(\n              alignment: Alignment.centerRight,\n              child: Text(\n                '${(progress * 100).toInt()}% Complete',\n                style: textTheme.labelMedium?.copyWith(\n                  color: colorScheme.onSurfaceVariant,\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/screens/journey_screen.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/screens/add_edit_task_screen.dart'; // Re-use for adding new journey\nimport 'package:gentle_progress/widgets/empty_state_illustration.dart';\nimport 'package:gentle_progress/widgets/journey_card.dart';\n\nclass JourneyScreen extends StatelessWidget {\n  const JourneyScreen({super.key});\n\n  // Mock data for demonstration\n  final List<Map<String, dynamic>> _journeys = const [\n    {\n      'title': 'Learn Flutter Development',\n      'description': 'Master the basics of Flutter UI and state management to build beautiful apps.',\n      'progress': 0.65,\n    },\n    {\n      'title': 'Run a Marathon',\n      'description': 'Follow a training plan to build endurance and complete a full marathon.',\n      'progress': 0.30,\n    },\n    {\n      'title': 'Write a Novel',\n      'description': 'Outline, draft, and revise a 50,000-word fantasy novel.',\n      'progress': 0.10,\n    },\n  ];\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Your Journey'),\n      ),\n      body: _journeys.isEmpty\n          ? EmptyStateIllustration(\n              icon: Icons.map_outlined,\n              title: 'What great things shall we begin?',\n              message: 'Journeys help you connect daily tasks to larger goals.',\n              actionButton: ElevatedButton.icon(\n                onPressed: () {\n                  Navigator.of(context).push(\n                    MaterialPageRoute(\n                      builder: (context) => const AddEditTaskScreen(isJourney: true), // Re-use for journey\n                      fullscreenDialog: true,\n                    ),\n                  );\n                },\n                icon: const Icon(Icons.add),\n                label: const Text('Create a New Journey'),\n              ),\n            )\n          : ListView.builder(\n              padding: const EdgeInsets.symmetric(vertical: 16.0),\n              itemCount: _journeys.length,\n              itemBuilder: (context, index) {\n                final journey = _journeys[index];\n                return JourneyCard(\n                  title: journey['title'],\n                  description: journey['description'],\n                  progress: journey['progress'],\n                );\n              },\n            ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/stat_card.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/theme.dart';\n\nclass StatCard extends StatelessWidget {\n  final String label;\n  final String value;\n  final IconData? icon;\n\n  const StatCard({\n    super.key,\n    required this.label,\n    required this.value,\n    this.icon,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    return Card(\n      child: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            if (icon != null) ...[\n              Icon(icon, color: colorScheme.onSurfaceVariant),\n              const SizedBox(height: 8),\n            ],\n            Text(\n              label,\n              style: textTheme.labelLarge?.copyWith(\n                color: colorScheme.onSurfaceVariant,\n              ),\n            ),\n            const SizedBox(height: 4),\n            Text(\n              value,\n              style: textTheme.headlineMedium?.copyWith( // IMPROVE_HIERARCHY_IN_STATS\n                fontWeight: FontWeight.bold,\n                color: AppColors.secondary, // Highlight value with secondary color\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/widgets/milestone_badge.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/theme.dart';\n\nclass MilestoneBadge extends StatelessWidget {\n  final IconData icon;\n  final String label;\n  final bool isUnlocked;\n\n  const MilestoneBadge({\n    super.key,\n    required this.icon,\n    required this.label,\n    this.isUnlocked = false,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    final colorScheme = Theme.of(context).colorScheme;\n    final textTheme = Theme.of(context).textTheme;\n\n    return GestureDetector(\n      onTap: () {\n        if (isUnlocked) {\n          ScaffoldMessenger.of(context).showSnackBar(\n            SnackBar(\n              content: Text('You unlocked the \"$label\" milestone!'),\n              backgroundColor: AppColors.success,\n            ),\n          );\n        } else {\n          ScaffoldMessenger.of(context).showSnackBar(\n            SnackBar(\n              content: Text('Keep going to unlock \"$label\"!'),\n              backgroundColor: colorScheme.onSurfaceVariant,\n            ),\n          );\n        }\n      },\n      child: Column(\n        children: [\n          CircleAvatar(\n            radius: 30,\n            backgroundColor: isUnlocked\n                ? AppColors.primary.withOpacity(0.1) // Soft background for unlocked\n                : colorScheme.onSurfaceVariant.withOpacity(0.05), // Very light for locked\n            child: Icon(\n              icon,\n              size: 30,\n              color: isUnlocked\n                  ? AppColors.primary // Primary color for unlocked icon\n                  : colorScheme.onSurfaceVariant.withOpacity(0.4), // Faded for locked\n            ),\n          ),\n          const SizedBox(height: 8),\n          Text(\n            label,\n            style: textTheme.labelSmall?.copyWith(\n              color: isUnlocked\n                  ? colorScheme.onSurface\n                  : colorScheme.onSurfaceVariant,\n              fontWeight: isUnlocked ? FontWeight.w600 : FontWeight.normal,\n            ),\n            textAlign: TextAlign.center,\n          ),\n        ],\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/screens/progress_screen.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/widgets/milestone_badge.dart';\nimport 'package:gentle_progress/widgets/stat_card.dart';\n\nclass ProgressScreen extends StatelessWidget {\n  const ProgressScreen({super.key});\n\n  // Mock data for demonstration\n  final List<Map<String, dynamic>> _stats = const [\n    {'label': 'Weekly Goal', 'value': '5/7', 'icon': Icons.calendar_today_outlined},\n    {'label': 'Current Streak', 'value': '14 days', 'icon': Icons.local_fire_department_outlined},\n    {'label': 'Tasks Completed', 'value': '128', 'icon': Icons.check_circle_outline},\n    {'label': 'Journeys Active', 'value': '3', 'icon': Icons.alt_route_outlined},\n  ];\n\n  final List<Map<String, dynamic>> _milestones = const [\n    {'label': 'First Step', 'icon': Icons.directions_walk_outlined, 'unlocked': true},\n    {'label': 'Daily Habit', 'icon': Icons.repeat_outlined, 'unlocked': true},\n    {'label': 'Week Streak', 'icon': Icons.calendar_month_outlined, 'unlocked': true},\n    {'label': 'Month Streak', 'icon': Icons.calendar_today_outlined, 'unlocked': false},\n    {'label': 'Goal Setter', 'icon': Icons.flag_outlined, 'unlocked': false},\n    {'label': 'Master Planner', 'icon': Icons.edit_note_outlined, 'unlocked': false},\n  ];\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Your Progress'),\n      ),\n      body: SingleChildScrollView(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Text(\n              'Your Stats',\n              style: textTheme.titleLarge?.copyWith(fontWeight: FontWeight.bold),\n            ),\n            const SizedBox(height: 16),\n            GridView.builder(\n              shrinkWrap: true,\n              physics: const NeverScrollableScrollPhysics(),\n              gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(\n                crossAxisCount: 2,\n                crossAxisSpacing: 16.0,\n                mainAxisSpacing: 16.0,\n                childAspectRatio: 1.2, // Adjust card aspect ratio\n              ),\n              itemCount: _stats.length,\n              itemBuilder: (context, index) {\n                final stat = _stats[index];\n                return StatCard(\n                  label: stat['label'],\n                  value: stat['value'],\n                  icon: stat['icon'],\n                );\n              },\n            ),\n            const SizedBox(height: 32),\n            Text(\n              'Milestones Unlocked',\n              style: textTheme.titleLarge?.copyWith(fontWeight: FontWeight.bold),\n            ),\n            const SizedBox(height: 16),\n            Wrap(\n              spacing: 16.0, // Horizontal spacing between badges\n              runSpacing: 24.0, // Vertical spacing between rows of badges\n              alignment: WrapAlignment.start,\n              children: _milestones.map((milestone) {\n                return SizedBox(\n                  width: (MediaQuery.of(context).size.width - 32 - 16 * 2) / 3, // Roughly 3 per row\n                  child: MilestoneBadge(\n                    icon: milestone['icon'],\n                    label: milestone['label'],\n                    isUnlocked: milestone['unlocked'],\n                  ),\n                );\n              }).toList(),\n            ),\n            const SizedBox(height: 80), // Space for FAB\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/screens/profile_settings_screen.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\n\nclass ProfileSettingsScreen extends StatelessWidget {\n  const ProfileSettingsScreen({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Profile & Settings'),\n      ),\n      body: ListView(\n        padding: const EdgeInsets.all(16.0),\n        children: [\n          // Profile Section\n          Padding(\n            padding: const EdgeInsets.symmetric(vertical: 16.0),\n            child: Column(\n              children: [\n                CircleAvatar(\n                  radius: 40,\n                  backgroundColor: colorScheme.primaryContainer,\n                  child: Icon(Icons.person, size: 40, color: colorScheme.onPrimaryContainer),\n                ),\n                const SizedBox(height: 12),\n                Text(\n                  'Jane Doe',\n                  style: textTheme.headlineSmall?.copyWith(fontWeight: FontWeight.bold),\n                ),\n                Text(\n                  'jane.doe@example.com',\n                  style: textTheme.bodyMedium?.copyWith(color: colorScheme.onSurfaceVariant),\n                ),\n              ],\n            ),\n          ),\n          const Divider(),\n          // Account Settings\n          ListTile(\n            leading: Icon(Icons.account_circle_outlined, color: colorScheme.onSurfaceVariant),\n            title: Text('Account Information', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Navigate to account details\n            },\n          ),\n          ListTile(\n            leading: Icon(Icons.lock_outline, color: colorScheme.onSurfaceVariant),\n            title: Text('Change Password', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Navigate to password change screen\n            },\n          ),\n          const Divider(),\n          // App Preferences\n          ListTile(\n            leading: Icon(Icons.notifications_none, color: colorScheme.onSurfaceVariant),\n            title: Text('Notification Preferences', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Navigate to notification settings\n            },\n          ),\n          ListTile(\n            leading: Icon(Icons.color_lens_outlined, color: colorScheme.onSurfaceVariant),\n            title: Text('Theme Customization', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Navigate to theme settings\n            },\n          ),\n          ListTile(\n            leading: Icon(Icons.language_outlined, color: colorScheme.onSurfaceVariant),\n            title: Text('Language', style: textTheme.titleMedium),\n            trailing: Text('English', style: textTheme.bodyLarge?.copyWith(color: colorScheme.onSurfaceVariant)),\n            onTap: () {\n              // Open language picker\n            },\n          ),\n          const Divider(),\n          // Support & Legal\n          ListTile(\n            leading: Icon(Icons.help_outline, color: colorScheme.onSurfaceVariant),\n            title: Text('Help & Support', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Open help screen\n            },\n          ),\n          ListTile(\n            leading: Icon(Icons.policy_outlined, color: colorScheme.onSurfaceVariant),\n            title: Text('Privacy Policy', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Open privacy policy\n            },\n          ),\n          ListTile(\n            leading: Icon(Icons.info_outline, color: colorScheme.onSurfaceVariant),\n            title: Text('About Gentle Progress', style: textTheme.titleMedium),\n            trailing: Icon(Icons.chevron_right, color: colorScheme.onSurfaceVariant),\n            onTap: () {\n              // Show app version, credits etc.\n            },\n          ),\n          const Divider(),\n          // Logout\n          Padding(\n            padding: const EdgeInsets.symmetric(vertical: 24.0),\n            child: OutlinedButton.icon(\n              icon: const Icon(Icons.logout),\n              label: const Text('Log Out'),\n              style: OutlinedButton.styleFrom(\n                foregroundColor: colorScheme.error,\n                side: BorderSide(color: colorScheme.error),\n                minimumSize: const Size.fromHeight(50),\n              ),\n              onPressed: () {\n                // Implement logout logic\n              },\n            ),\n          ),\n          const SizedBox(height: 80), // Space for FAB\n        ],\n      ),\n    );\n  }\n}\n\"\"\"\n  },\n  {\n    \"file\": \"lib/screens/add_edit_task_screen.dart\",\n    \"content\": \"\"\"\nimport 'package:flutter/material.dart';\nimport 'package:gentle_progress/theme.dart';\nimport 'package:intl/intl.dart';\n\nclass AddEditTaskScreen extends StatefulWidget {\n  final bool isEditing;\n  final String? taskId;\n  final bool isJourney; // To adapt for adding a journey\n\n  const AddEditTaskScreen({\n    super.key,\n    this.isEditing = false,\n    this.taskId,\n    this.isJourney = false,\n  });\n\n  @override\n  State<AddEditTaskScreen> createState() => _AddEditTaskScreenState();\n}\n\nclass _AddEditTaskScreenState extends State<AddEditTaskScreen> {\n  final _formKey = GlobalKey<FormState>();\n  late TextEditingController _titleController;\n  late TextEditingController _descriptionController;\n  String? _selectedJourney;\n  DateTime? _selectedDate;\n\n  final List<String> _mockJourneys = ['Mindfulness', 'Work', 'Personal', 'Growth', 'Home'];\n\n  @override\n  void initState() {\n    super.initState();\n    _titleController = TextEditingController();\n    _descriptionController = TextEditingController();\n\n    if (widget.isEditing) {\n      // Populate fields if editing an existing task/journey\n      // For demo, we'll just pre-fill some values\n      _titleController.text = 'Example Task Title';\n      _descriptionController.text = 'This is a description for an example task.';\n      _selectedJourney = 'Work';\n      _selectedDate = DateTime.now().add(const Duration(days: 1));\n    }\n  }\n\n  @override\n  void dispose() {\n    _titleController.dispose();\n    _descriptionController.dispose();\n    super.dispose();\n  }\n\n  Future<void> _selectDate(BuildContext context) async {\n    final DateTime? picked = await showDatePicker(\n      context: context,\n      initialDate: _selectedDate ?? DateTime.now(),\n      firstDate: DateTime.now(),\n      lastDate: DateTime(2101),\n      builder: (context, child) {\n        return Theme(\n          data: Theme.of(context).copyWith(\n            colorScheme: Theme.of(context).colorScheme.copyWith(\n              primary: AppColors.primary, // Primary color for date picker header\n              onPrimary: Colors.white,\n              onSurface: Theme.of(context).colorScheme.onSurface,\n            ),\n            textButtonTheme: TextButtonThemeData(\n              style: TextButton.styleFrom(\n                foregroundColor: AppColors.primary, // Primary color for dialog buttons\n              ),\n            ),\n          ),\n          child: child!,\n        );\n      },\n    );\n    if (picked != null && picked != _selectedDate) {\n      setState(() {\n        _selectedDate = picked;\n      });\n    }\n  }\n\n  void _saveForm() {\n    if (_formKey.currentState!.validate()) {\n      _formKey.currentState!.save();\n      // Logic to save task/journey\n      ScaffoldMessenger.of(context).showSnackBar(\n        SnackBar(\n          content: Text('${widget.isJourney ? 'Journey' : 'Task'} saved!'),\n          backgroundColor: AppColors.success,\n        ),\n      );\n      Navigator.of(context).pop();\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    final textTheme = Theme.of(context).textTheme;\n    final colorScheme = Theme.of(context).colorScheme;\n\n    final String screenTitle = widget.isEditing\n        ? 'Edit ${widget.isJourney ? 'Journey' : 'Task'}'\n        : 'Add New ${widget.isJourney ? 'Journey' : 'Task'}';\n    final String saveButtonText = widget.isEditing\n        ? 'Update ${widget.isJourney ? 'Journey' : 'Task'}'\n        : 'Save ${widget.isJourney ? 'Journey' : 'Task'}';\n\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(screenTitle),\n        leading: IconButton(\n          icon: const Icon(Icons.close),\n          onPressed: () => Navigator.of(context).pop(),\n        ),\n      ),\n      body: Form(\n        key: _formKey,\n        child: ListView(\n          padding: const EdgeInsets.all(16.0),\n          children: [\n            TextFormField(\n              controller: _titleController,\n              decoration: InputDecoration(\n                labelText: widget.isJourney ? 'Journey Title' : 'Task Title',\n                hintText: widget.isJourney ? 'e.g., Learn a new skill' : 'e.g., Complete daily meditation',\n              ),\n              validator: (value) {\n                if (value == null || value.isEmpty) {\n                  return 'Please enter a title';\n                }\n                return null;\n              },\n            ),\n            const SizedBox(height: 16),\n            TextFormField(\n              controller: _descriptionController,\n              decoration: InputDecoration(\n                labelText: widget.isJourney ? 'Description (Optional)' : 'Details (Optional)',\n                hintText: widget.isJourney ? 'Briefly describe your long-term goal' : 'Add any notes or context',\n                alignLabelWithHint: true,\n              ),\n              maxLines: 4,\n              minLines: 2,\n            ),\n            if (!widget.isJourney) ...[ // Task-specific fields\n              const SizedBox(height: 16),\n              DropdownButtonFormField<String>(\n                value: _selectedJourney,\n                decoration: InputDecoration(\n                  labelText: 'Associate with Journey',\n                  hintText: 'Select a journey',\n                ),\n                items: [\n                  const DropdownMenuItem<String>(\n                    value: null,\n                    child: Text('None'),\n                  ),\n                  ..._mockJourneys.map((journey) => DropdownMenuItem(\n                    value: journey,\n                    child: Text(journey),\n                  )),\n                ],\n                onChanged: (String? newValue) {\n                  setState(() {\n                    _selectedJourney = newValue;\n                  });\n                },\n                validator: (value) {\n                  // Optional: make journey selection mandatory\n                  return null;\n                },\n              ),\n              const SizedBox(height: 16),\n              GestureDetector(\n                onTap: () => _selectDate(context),\n                child: AbsorbPointer(\n                  child: TextFormField(\n                    decoration: InputDecoration(\n                      labelText: 'Due Date (Optional)',\n                      hintText: 'Select a date',\n                      suffixIcon: Icon(Icons.calendar_today_outlined, color: colorScheme.onSurfaceVariant),\n                    ),\n                    controller: TextEditingController(\n                      text: _selectedDate == null\n                          ? ''\n                          : DateFormat('MMM dd, yyyy').format(_selectedDate!),\n                    ),\n                  ),\n                ),\n              ),\n            ],\n            const SizedBox(height: 32),\n            ElevatedButton(\n              onPressed: _saveForm,\n              child: Text(saveButtonText),\n            ),\n            if (widget.isEditing) ...[\n              const SizedBox(height: 16),\n              TextButton(\n                onPressed: () {\n                  // TODO: Implement delete logic\n                  Navigator.of(context).pop();\n                  ScaffoldMessenger.of(context).showSnackBar(\n                    SnackBar(\n                      content: Text('${widget.isJourney ? 'Journey' : 'Task'} deleted!'),\n                      backgroundColor: colorScheme.error,\n                    ),\n                  );\n                },\n                style: TextButton.styleFrom(\n                  foregroundColor: colorScheme.error,\n                ),\n                child: Text('Delete ${widget.isJourney ? 'Journey' : 'Task'}'),\n              ),\n            ],\n          ],\n        ),\n      ),\n    );\n  }\n}\n\"\"\"\n  }\n]\n```",
  "critique": "As a Flutter UI/UX Design Critic, I've reviewed the provided code. The application, \"Gentle Progress,\" has a strong foundation with a clean aesthetic, a well-considered theme, and a user-friendly structure. However, there are several key areas where improvements can be made, particularly concerning accessibility and modern Material 3 practices.\n\nHere is my critical review:\n\n```json\n{\n  \"issues\": [\n    {\n      \"id\": \"ACCESSIBILITY_COLOR_CONTRAST\",\n      \"file\": \"lib/theme.dart\",\n      \"area\": \"Color & Accessibility\",\n      \"description\": \"The primary color (#2A9D8F) used for ElevatedButton backgrounds has a contrast ratio of 3.05:1 against the white (#FFFFFF) foreground text. This fails the WCAG AA accessibility standard, which requires a minimum ratio of 4.5:1 for normal text. This makes buttons difficult to read for users with visual impairments.\"\n    },\n    {\n      \"id\": \"ACCESSIBILITY_CUSTOM_WIDGET\",\n      \"file\": \"lib/widgets/custom_checkbox.dart\",\n      \"area\": \"Accessibility\",\n      \"description\": \"The `CustomCheckbox` is built with a `GestureDetector`. This makes it inaccessible to users relying on screen readers or keyboard navigation, as it lacks the necessary semantic properties (e.g., checked state, role) and focusability that standard interactive widgets provide.\"\n    },\n    {\n      \"id\": \"M3_COMPLIANCE_NAVIGATION\",\n      \"file\": \"lib/app_scaffold.dart\",\n      \"area\": \"Material 3 Compliance\",\n      \"description\": \"The bottom navigation uses a `BottomAppBar` with a `CircularNotchedRectangle` and a centered FAB. This is a prominent Material 2 pattern. Material 3 recommends the `NavigationBar` widget, which offers updated aesthetics and interaction patterns. The current custom implementation also uses complex, hardcoded logic to manage screen indices around the FAB placeholder, making it brittle and difficult to maintain.\"\n    },\n    {\n      \"id\": \"THEMING_INCONSISTENCY\",\n      \"file\": \"lib/widgets/task_card.dart\",\n      \"area\": \"Color & Spacing\",\n      \"description\": \"Throughout the app, secondary text and UI elements use hardcoded opacity values (e.g., `AppColors.text.withOpacity(0.7)`). While visually effective, this bypasses the theme system. A complete Material 3 `ColorScheme` provides specific roles for this purpose (e.g., `onSurfaceVariant`), ensuring greater consistency and easier theme updates.\"\n    }\n  ],\n  \"suggestions\": [\n    {\n      \"id\": \"IMPROVE_COLOR_CONTRAST\",\n      \"file\": \"lib/theme.dart\",\n      \"area\": \"Color & Accessibility\",\n      \"description\": \"To fix the contrast issue, either darken the primary color (e.g., to #21887D) or use a darker `onPrimary` color. A more robust M3 approach is to use `ColorScheme.fromSeed` to generate a full palette, which will provide accessible color pairs like `primaryContainer` and `onPrimaryContainer` that are perfect for buttons.\"\n    },\n    {\n      \"id\": \"MODERNIZE_NAVIGATION_BAR\",\n      \"file\": \"lib/app_scaffold.dart\",\n      \"area\": \"Material 3 Compliance\",\n      \"description\": \"Replace the custom `BottomAppBar` and `Row` of `InkWell`s with the standard Material 3 `NavigationBar` widget. This will simplify the navigation logic, automatically improve accessibility with correct semantics, and align the app with modern design standards. The 'Add Task' action can be triggered from a standard FAB docked to the right or integrated into the AppBar of the relevant screen.\"\n    },\n    {\n      \"id\": \"REFACTOR_FOR_ACCESSIBILITY\",\n      \"file\": \"lib/widgets/custom_checkbox.dart\",\n      \"area\": \"Accessibility\",\n      \"description\": \"The simplest and most effective solution is to replace the custom checkbox with the standard Flutter `Checkbox` widget and style it using `CheckboxThemeData` in your `AppTheme`. If the custom animation is essential, the widget must be wrapped in a `Semantics` widget, explicitly defining its state (`isChecked`, `isEnabled`) and actions (`onTap`) to make it understandable to assistive technologies.\"\n    },\n    {\n      \"id\": \"ENHANCE_THEME_USAGE\",\n      \"file\": \"lib/theme.dart\",\n      \"area\": \"Material 3 Compliance\",\n      \"description\": \"Expand the `ColorScheme` to be fully M3-compliant by using `ColorScheme.fromSeed(seedColor: AppColors.primary)`. This will generate a rich set of color roles. Then, refactor the UI to use these roles. For example, replace `AppColors.text.withOpacity(0.7)` with `Theme.of(context).colorScheme.onSurfaceVariant` and style the `Chip` in `TaskCard` using `Theme.of(context).colorScheme.secondaryContainer` for its background.\"\n    },\n    {\n      \"id\": \"REFINE_LIST_STRUCTURE\",\n      \"file\": \"lib/screens/today_screen.dart\",\n      \"area\": \"Visual Hierarchy\",\n      \"description\": \"The `ListView.builder` combining 'Today's Focus' and 'Completed' tasks has complex indexing logic. Refactor this into a `CustomScrollView` with two `SliverList`s, each preceded by a `SliverToBoxAdapter` for its header. This approach is more declarative, readable, and scalable for future sections.\"\n    },\n    {\n      \"id\": \"IMPROVE_HIERARCHY_IN_STATS\",\n      \"file\": \"lib/screens/progress_screen.dart\",\n      \"area\": \"Visual Hierarchy\",\n      \"description\": \"The stats cards in the Progress screen are well-designed. To further enhance the hierarchy, consider slightly increasing the font weight or size difference between the metric (`value`) and its label (`key`). The current `headlineMedium` for the value is great; ensure the label's `labelLarge` style provides enough contrast in emphasis without competing for attention.\"\n    }\n  ]\n}\n```",
  "final_code": "```json\n[\n  {\n    \"file\": \"lib/main.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/screens/add_edit_task_screen.dart';\\nimport 'package:flutter_app/screens/journey_screen.dart';\\nimport 'package:flutter_app/screens/profile_settings_screen.dart';\\nimport 'package:flutter_app/screens/progress_screen.dart';\\nimport 'package:flutter_app/screens/today_screen.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\nimport 'package:flutter_app/theme/app_theme.dart';\\n\\nvoid main() {\\n  runApp(const MyApp());\\n}\\n\\nclass MyApp extends StatelessWidget {\\n  const MyApp({super.key});\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return MaterialApp(\\n      title: 'Gentle Progress',\\n      theme: AppTheme.lightTheme,\\n      home: const HomePage(),\\n      debugShowCheckedModeBanner: false,\\n    );\\n  }\\n}\\n\\nclass HomePage extends StatefulWidget {\\n  const HomePage({super.key});\\n\\n  @override\\n  State<HomePage> createState() => _HomePageState();\\n}\\n\\nclass _HomePageState extends State<HomePage> {\\n  int _selectedIndex = 0;\\n\\n  // List of widgets to display in the body of the Scaffold\\n  static const List<Widget> _widgetOptions = <Widget>[\\n    TodayScreen(),\\n    JourneyScreen(),\\n    ProgressScreen(),\\n    ProfileSettingsScreen(),\\n  ];\\n\\n  void _onItemTapped(int index) {\\n    setState(() {\\n      _selectedIndex = index;\\n    });\\n  }\\n\\n  void _onAddTaskPressed() {\\n    Navigator.of(context).push(\\n      MaterialPageRoute(\\n        builder: (context) => const AddEditTaskScreen(),\\n        fullscreenDialog: true, // Typically true for modal-like screens\\n      ),\\n    );\\n  }\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return Scaffold(\\n      body: Center(\\n        child: _widgetOptions.elementAt(_selectedIndex),\\n      ),\\n      floatingActionButton: FloatingActionButton(\\n        onPressed: _onAddTaskPressed,\\n        backgroundColor: AppColors.primary,\\n        foregroundColor: AppColors.white,\\n        shape: const CircleBorder(),\\n        elevation: 4,\\n        child: const Icon(Icons.add),\\n      ),\\n      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,\\n      bottomNavigationBar: BottomAppBar(\\n        shape: const CircularNotchedRectangle(),\\n        notchMargin: 8.0,\\n        color: AppColors.white,\\n        surfaceTintColor: AppColors.white, // For Material 3\\n        child: Row(\\n          mainAxisAlignment: MainAxisAlignment.spaceAround,\\n          children: <Widget>[\\n            _buildNavItem(0, Icons.wb_sunny_outlined, 'Today'), // Sun icon for Today\\n            _buildNavItem(1, Icons.landscape_outlined, 'Journey'), // Mountain/path icon for Journey\\n            const SizedBox(width: 48), // The space for the FAB\\n            _buildNavItem(2, Icons.bar_chart_outlined, 'Progress'), // Bar chart for Progress\\n            _buildNavItem(3, Icons.person_outline, 'Profile'), // Person icon for Profile\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n\\n  Widget _buildNavItem(int index, IconData icon, String label) {\\n    return Expanded(\\n      child: InkWell(\\n        onTap: () => _onItemTapped(index),\\n        customBorder: const CircleBorder(), // For ripple effect\\n        child: Padding(\\n          padding: const EdgeInsets.symmetric(vertical: 8.0),\\n          child: Column(\\n            mainAxisSize: MainAxisSize.min,\\n            children: <Widget>[\\n              Icon(\\n                icon,\\n                color: _selectedIndex == index ? AppColors.primary : AppColors.text.withOpacity(0.6),\\n              ),\\n              Text(\\n                label,\\n                style: TextStyle(\\n                  fontFamily: 'Poppins', // Placeholder, ensure font is loaded\\n                  fontSize: 12,\\n                  fontWeight: _selectedIndex == index ? FontWeight.w600 : FontWeight.normal,\\n                  color: _selectedIndex == index ? AppColors.primary : AppColors.text.withOpacity(0.6),\\n                ),\\n              ),\\n            ],\\n          ),\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/theme/app_colors.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\n\\nclass AppColors {\\n  static const Color primary = Color(0xFF2A9D8F); // Teal\\n  static const Color accent = Color(0xFFE76F51); // Burnt Orange\\n  static const Color secondary = Color(0xFFF4A261); // Orange\\n  static const Color text = Color(0xFF264653); // Dark Blue/Charcoal\\n  static const Color background = Color(0xFFF8F9FA); // Off-white\\n  static const Color lightGrey = Color(0xFFE0E0E0); // For progress bar track, etc.\\n  static const Color white = Colors.white;\\n  static const Color black = Colors.black;\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/theme/app_theme.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'app_colors.dart';\\n\\nclass AppTheme {\\n  static ThemeData get lightTheme {\\n    return ThemeData(\\n      primaryColor: AppColors.primary,\\n      scaffoldBackgroundColor: AppColors.background,\\n      appBarTheme: const AppBarTheme(\\n        backgroundColor: AppColors.background,\\n        foregroundColor: AppColors.text,\\n        elevation: 0,\\n        centerTitle: true,\\n        titleTextStyle: TextStyle(\\n          fontFamily: 'Poppins', // Placeholder: Ensure 'Poppins' font is added to pubspec.yaml and assets.\\n          fontSize: 20,\\n          fontWeight: FontWeight.bold,\\n          color: AppColors.text,\\n        ),\\n      ),\\n      colorScheme: const ColorScheme.light(\\n        primary: AppColors.primary,\\n        secondary: AppColors.secondary,\\n        surface: AppColors.background,\\n        background: AppColors.background,\\n        error: AppColors.accent, // Using accent for error for now\\n        onPrimary: AppColors.white,\\n        onSecondary: AppColors.white,\\n        onSurface: AppColors.text,\\n        onBackground: AppColors.text,\\n        onError: AppColors.white,\\n        brightness: Brightness.light,\\n      ),\\n      textTheme: const TextTheme(\\n        displayLarge: TextStyle(fontFamily: 'Poppins', fontSize: 57, fontWeight: FontWeight.bold, color: AppColors.text),\\n        displayMedium: TextStyle(fontFamily: 'Poppins', fontSize: 45, fontWeight: FontWeight.bold, color: AppColors.text),\\n        displaySmall: TextStyle(fontFamily: 'Poppins', fontSize: 36, fontWeight: FontWeight.bold, color: AppColors.text),\\n        headlineLarge: TextStyle(fontFamily: 'Poppins', fontSize: 32, fontWeight: FontWeight.bold, color: AppColors.text),\\n        headlineMedium: TextStyle(fontFamily: 'Poppins', fontSize: 28, fontWeight: FontWeight.bold, color: AppColors.text),\\n        headlineSmall: TextStyle(fontFamily: 'Poppins', fontSize: 24, fontWeight: FontWeight.bold, color: AppColors.text),\\n        titleLarge: TextStyle(fontFamily: 'Poppins', fontSize: 22, fontWeight: FontWeight.bold, color: AppColors.text),\\n        titleMedium: TextStyle(fontFamily: 'Poppins', fontSize: 16, fontWeight: FontWeight.w600, color: AppColors.text),\\n        titleSmall: TextStyle(fontFamily: 'Poppins', fontSize: 14, fontWeight: FontWeight.w600, color: AppColors.text),\\n        bodyLarge: TextStyle(fontFamily: 'Poppins', fontSize: 16, color: AppColors.text),\\n        bodyMedium: TextStyle(fontFamily: 'Poppins', fontSize: 14, color: AppColors.text),\\n        bodySmall: TextStyle(fontFamily: 'Poppins', fontSize: 12, color: AppColors.text),\\n        labelLarge: TextStyle(fontFamily: 'Poppins', fontSize: 14, fontWeight: FontWeight.w600, color: AppColors.text),\\n        labelMedium: TextStyle(fontFamily: 'Poppins', fontSize: 12, fontWeight: FontWeight.w600, color: AppColors.text),\\n        labelSmall: TextStyle(fontFamily: 'Poppins', fontSize: 10, fontWeight: FontWeight.w600, color: AppColors.text),\\n      ),\\n      bottomNavigationBarTheme: BottomNavigationBarThemeData(\\n        backgroundColor: AppColors.white,\\n        selectedItemColor: AppColors.primary,\\n        unselectedItemColor: AppColors.text.withOpacity(0.6),\\n        selectedLabelStyle: const TextStyle(fontFamily: 'Poppins', fontSize: 12, fontWeight: FontWeight.w600),\\n        unselectedLabelStyle: const TextStyle(fontFamily: 'Poppins', fontSize: 12),\\n        type: BottomNavigationBarType.fixed, // Ensures all labels are visible\\n      ),\\n      floatingActionButtonTheme: const FloatingActionButtonThemeData(\\n        backgroundColor: AppColors.primary,\\n        foregroundColor: AppColors.white,\\n        shape: CircleBorder(),\\n        elevation: 4,\\n      ),\\n      elevatedButtonTheme: ElevatedButtonThemeData(\\n        style: ElevatedButton.styleFrom(\\n          backgroundColor: AppColors.primary,\\n          foregroundColor: AppColors.white,\\n          shape: RoundedRectangleBorder(\\n            borderRadius: BorderRadius.circular(12), // Rounded corners for buttons\\n          ),\\n          padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\\n          textStyle: const TextStyle(fontFamily: 'Poppins', fontSize: 16, fontWeight: FontWeight.w600),\\n        ),\\n      ),\\n      textButtonTheme: TextButtonThemeData(\\n        style: TextButton.styleFrom(\\n          foregroundColor: AppColors.primary,\\n          textStyle: const TextStyle(fontFamily: 'Poppins', fontSize: 16, fontWeight: FontWeight.w600),\\n        ),\\n      ),\\n      outlinedButtonTheme: OutlinedButtonThemeData(\\n        style: OutlinedButton.styleFrom(\\n          foregroundColor: AppColors.primary,\\n          side: const BorderSide(color: AppColors.primary, width: 2),\\n          shape: RoundedRectangleBorder(\\n            borderRadius: BorderRadius.circular(12),\\n          ),\\n          padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),\\n          textStyle: const TextStyle(fontFamily: 'Poppins', fontSize: 16, fontWeight: FontWeight.w600),\\n        ),\\n      ),\\n      inputDecorationTheme: InputDecorationTheme(\\n        filled: true,\\n        fillColor: AppColors.background,\\n        contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),\\n        border: OutlineInputBorder(\\n          borderRadius: BorderRadius.circular(8),\\n          borderSide: BorderSide.none, // Default no border, rely on fill color\\n        ),\\n        enabledBorder: OutlineInputBorder(\\n          borderRadius: BorderRadius.circular(8),\\n          borderSide: BorderSide.none,\\n        ),\\n        focusedBorder: OutlineInputBorder(\\n          borderRadius: BorderRadius.circular(8),\\n          borderSide: const BorderSide(color: AppColors.primary, width: 2), // Primary color when focused\\n        ),\\n        errorBorder: OutlineInputBorder(\\n          borderRadius: BorderRadius.circular(8),\\n          borderSide: const BorderSide(color: AppColors.accent, width: 2),\\n        ),\\n        focusedErrorBorder: OutlineInputBorder(\\n          borderRadius: BorderRadius.circular(8),\\n          borderSide: const BorderSide(color: AppColors.accent, width: 2),\\n        ),\\n        labelStyle: const TextStyle(fontFamily: 'Poppins', color: AppColors.text),\\n        hintStyle: TextStyle(fontFamily: 'Poppins', color: AppColors.text.withOpacity(0.6)),\\n      ),\\n      cardTheme: CardTheme(\\n        color: AppColors.white,\\n        elevation: 2,\\n        shape: RoundedRectangleBorder(\\n          borderRadius: BorderRadius.circular(16),\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/screens/today_screen.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\nimport 'package:intl/intl.dart'; // Required for DateFormat\\n\\nclass TodayScreen extends StatefulWidget {\\n  const TodayScreen({super.key});\\n\\n  @override\\n  State<TodayScreen> createState() => _TodayScreenState();\\n}\\n\\nclass _TodayScreenState extends State<TodayScreen> {\\n  bool _showMotivationalCard = true;\\n  final List<String> _tasks = ['Meditate for 10 minutes', 'Read 20 pages of a book', 'Go for a 30-min walk'];\\n  final List<bool> _taskCompleted = [false, false, false];\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n    final now = DateTime.now();\\n    final formatter = DateFormat('EEEE, MMMM d'); // Example: Tuesday, January 23\\n\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: const Text('Today'),\\n        automaticallyImplyLeading: false, // Hide back button on main nav screens\\n      ),\\n      body: Padding(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Column(\\n          crossAxisAlignment: CrossAxisAlignment.start,\\n          children: [\\n            Text(\\n              'Good morning, [Name]!', // Placeholder for user's name\\n              style: textTheme.headlineSmall?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 4),\\n            Text(\\n              formatter.format(now),\\n              style: textTheme.bodyLarge?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n            ),\\n            const SizedBox(height: 24),\\n\\n            if (_showMotivationalCard)\\n              _buildMotivationalCard(textTheme),\\n            if (_showMotivationalCard)\\n              const SizedBox(height: 24),\\n\\n            Text(\\n              'Your Focus for Today',\\n              style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 16),\\n\\n            _tasks.isEmpty\\n                ? _buildEmptyState(textTheme)\\n                : Expanded(\\n                    child: ListView.builder(\\n                      itemCount: _tasks.length,\\n                      itemBuilder: (context, index) {\\n                        return TaskCard(\\n                          taskTitle: _tasks[index],\\n                          isCompleted: _taskCompleted[index],\\n                          onChanged: (bool? value) {\\n                            setState(() {\\n                              _taskCompleted[index] = value ?? false;\\n                            });\\n                          },\\n                        );\\n                      },\\n                    ),\\n                  ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n\\n  Widget _buildMotivationalCard(TextTheme textTheme) {\\n    return Card(\\n      margin: EdgeInsets.zero,\\n      shape: RoundedRectangleBorder(\\n        borderRadius: BorderRadius.circular(16),\\n        side: const BorderSide(color: AppColors.accent, width: 1), // Accent color border\\n      ),\\n      child: Padding(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Row(\\n          children: [\\n            const Icon(Icons.lightbulb_outline, color: AppColors.accent),\\n            const SizedBox(width: 12),\\n            Expanded(\\n              child: Text(\\n                '“The journey of a thousand miles begins with a single step.”',\\n                style: textTheme.bodyMedium?.copyWith(fontStyle: FontStyle.italic, color: AppColors.text),\\n              ),\\n            ),\\n            IconButton(\\n              icon: const Icon(Icons.close, color: AppColors.text),\\n              onPressed: () {\\n                setState(() {\\n                  _showMotivationalCard = false;\\n                });\\n              },\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n\\n  Widget _buildEmptyState(TextTheme textTheme) {\\n    return Expanded(\\n      child: Center(\\n        child: Column(\\n          mainAxisAlignment: MainAxisAlignment.center,\\n          children: [\\n            Icon(Icons.self_improvement, size: 80, color: AppColors.primary.withOpacity(0.6)), // Placeholder icon\\n            const SizedBox(height: 24),\\n            Text(\\n              'A clear space for a calm day.',\\n              style: textTheme.headlineSmall?.copyWith(color: AppColors.text),\\n              textAlign: TextAlign.center,\\n            ),\\n            const SizedBox(height: 8),\\n            Text(\\n              'Ready to add a focus?',\\n              style: textTheme.bodyLarge?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n              textAlign: TextAlign.center,\\n            ),\\n            const SizedBox(height: 24),\\n            ElevatedButton(\\n              onPressed: () {\\n                // TODO: Navigate to Add/Edit Task screen or show modal\\n                // For now, just add a dummy task to demonstrate functionality\\n                setState(() {\\n                  _tasks.add('New task added from empty state!');\\n                  _taskCompleted.add(false);\\n                });\\n              },\\n              child: const Text('Add a Task'),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\\nclass TaskCard extends StatelessWidget {\\n  final String taskTitle;\\n  final String? journeyTag;\\n  final bool isCompleted;\\n  final ValueChanged<bool?> onChanged;\\n\\n  const TaskCard({\\n    super.key,\\n    required this.taskTitle,\\n    this.journeyTag,\\n    required this.isCompleted,\\n    required this.onChanged,\\n  });\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n    return Card(\\n      margin: const EdgeInsets.only(bottom: 12),\\n      child: Padding(\\n        padding: const EdgeInsets.symmetric(horizontal: 16.0, vertical: 12.0),\\n        child: Row(\\n          children: [\\n            SizedBox(\\n              width: 24, // Custom checkbox size\\n              height: 24,\\n              child: Checkbox(\\n                value: isCompleted,\\n                onChanged: onChanged,\\n                activeColor: AppColors.primary,\\n                checkColor: AppColors.white,\\n                shape: const CircleBorder(),\\n                side: BorderSide(color: AppColors.primary.withOpacity(0.6), width: 2),\\n              ),\\n            ),\\n            const SizedBox(width: 16),\\n            Expanded(\\n              child: Column(\\n                crossAxisAlignment: CrossAxisAlignment.start,\\n                children: [\\n                  Text(\\n                    taskTitle,\\n                    style: textTheme.titleMedium?.copyWith(\\n                      color: AppColors.text,\\n                      decoration: isCompleted ? TextDecoration.lineThrough : TextDecoration.none,\\n                      decorationColor: AppColors.text.withOpacity(0.7),\\n                    ),\\n                  ),\\n                  if (journeyTag != null) ...[\\n                    const SizedBox(height: 4),\\n                    Container(\\n                      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\\n                      decoration: BoxDecoration(\\n                        color: AppColors.primary.withOpacity(0.1),\\n                        borderRadius: BorderRadius.circular(8),\\n                      ),\\n                      child: Text(\\n                        journeyTag!,\\n                        style: textTheme.labelSmall?.copyWith(color: AppColors.primary),\\n                      ),\\n                    ),\\n                  ],\\n                ],\\n              ),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/screens/journey_screen.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\n\\nclass JourneyScreen extends StatefulWidget {\\n  const JourneyScreen({super.key});\\n\\n  @override\\n  State<JourneyScreen> createState() => _JourneyScreenState();\\n}\\n\\nclass _JourneyScreenState extends State<JourneyScreen> {\\n  final List<Map<String, dynamic>> _journeys = [\\n    {'title': 'Learn Flutter', 'description': 'Become a proficient Flutter developer.', 'progress': 0.75},\\n    {'title': 'Write a Novel', 'description': 'Complete the first draft of my fantasy novel.', 'progress': 0.3},\\n    {'title': 'Run a Marathon', 'description': 'Train and complete a full marathon.', 'progress': 0.1},\\n  ];\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: const Text('Journey'),\\n        automaticallyImplyLeading: false,\\n      ),\\n      body: Padding(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Column(\\n          crossAxisAlignment: CrossAxisAlignment.start,\\n          children: [\\n            Text(\\n              'Your Journeys',\\n              style: textTheme.headlineSmall?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 24),\\n            _journeys.isEmpty\\n                ? _buildEmptyState(textTheme)\\n                : Expanded(\\n                    child: ListView.builder(\\n                      itemCount: _journeys.length,\\n                      itemBuilder: (context, index) {\\n                        final journey = _journeys[index];\\n                        return JourneyCard(\\n                          title: journey['title'],\\n                          description: journey['description'],\\n                          progress: (journey['progress'] as num).toDouble(),\\n                        );\\n                      },\\n                    ),\\n                  ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n\\n  Widget _buildEmptyState(TextTheme textTheme) {\\n    return Expanded(\\n      child: Center(\\n        child: Column(\\n          mainAxisAlignment: MainAxisAlignment.center,\\n          children: [\\n            Icon(Icons.explore_outlined, size: 80, color: AppColors.secondary.withOpacity(0.6)), // Placeholder icon\\n            const SizedBox(height: 24),\\n            Text(\\n              'What great things shall we begin?',\\n              style: textTheme.headlineSmall?.copyWith(color: AppColors.text),\\n              textAlign: TextAlign.center,\\n            ),\\n            const SizedBox(height: 24),\\n            ElevatedButton(\\n              onPressed: () {\\n                // TODO: Navigate to Add/Edit Journey screen\\n                // For now, add a dummy journey to demonstrate functionality\\n                setState(() {\\n                  _journeys.add({'title': 'New Adventure', 'description': 'Explore the unknown.', 'progress': 0.0});\\n                });\\n              },\\n              child: const Text('Start a New Journey'),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\\nclass JourneyCard extends StatelessWidget {\\n  final String title;\\n  final String description;\\n  final double progress; // 0.0 to 1.0\\n\\n  const JourneyCard({\\n    super.key,\\n    required this.title,\\n    required this.description,\\n    required this.progress,\\n  });\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n    return Card(\\n      margin: const EdgeInsets.only(bottom: 16),\\n      child: Padding(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Column(\\n          crossAxisAlignment: CrossAxisAlignment.start,\\n          children: [\\n            Text(\\n              title,\\n              style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 8),\\n            Text(\\n              description,\\n              style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.8)),\\n            ),\\n            const SizedBox(height: 16),\\n            LinearProgressIndicator(\\n              value: progress,\\n              backgroundColor: AppColors.lightGrey,\\n              valueColor: const AlwaysStoppedAnimation<Color>(AppColors.secondary),\\n              minHeight: 8,\\n              borderRadius: BorderRadius.circular(4),\\n            ),\\n            const SizedBox(height: 8),\\n            Align(\\n              alignment: Alignment.bottomRight,\\n              child: Text(\\n                '${(progress * 100).toInt()}% Complete',\\n                style: textTheme.labelMedium?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n              ),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/screens/progress_screen.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\n\\nclass ProgressScreen extends StatefulWidget {\\n  const ProgressScreen({super.key});\\n\\n  @override\\n  State<ProgressScreen> createState() => _ProgressScreenState();\\n}\\n\\nclass _ProgressScreenState extends State<ProgressScreen> {\\n  final List<Map<String, dynamic>> _milestones = [\\n    {'name': 'First Task', 'icon': Icons.check_circle_outline, 'unlocked': true, 'message': 'You completed your first task!'},\\n    {'name': '7-Day Streak', 'icon': Icons.local_fire_department_outlined, 'unlocked': false, 'message': 'Keep up the great work!'},\\n    {'name': '100 Tasks', 'icon': Icons.star_border, 'unlocked': false, 'message': 'Wow, 100 tasks down!'},\\n    {'name': 'First Journey', 'icon': Icons.flag_outlined, 'unlocked': true, 'message': 'Your journey has begun!'},\\n  ];\\n\\n  void _showMilestoneMessage(String message) {\\n    ScaffoldMessenger.of(context).showSnackBar(\\n      SnackBar(\\n        content: Text(message),\\n        backgroundColor: AppColors.primary,\\n        behavior: SnackBarBehavior.floating,\\n        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(10)),\\n        margin: const EdgeInsets.all(16),\\n      ),\\n    );\\n  }\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: const Text('Progress'),\\n        automaticallyImplyLeading: false,\\n      ),\\n      body: SingleChildScrollView(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Column(\\n          crossAxisAlignment: CrossAxisAlignment.start,\\n          children: [\\n            Text(\\n              'Your Progress',\\n              style: textTheme.headlineSmall?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 24),\\n\\n            // Stats Grid\\n            Text(\\n              'Key Metrics',\\n              style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 16),\\n            GridView.count(\\n              shrinkWrap: true,\\n              physics: const NeverScrollableScrollPhysics(),\\n              crossAxisCount: 2,\\n              crossAxisSpacing: 16,\\n              mainAxisSpacing: 16,\\n              childAspectRatio: 1.5, // Adjust aspect ratio for card size\\n              children: const [\\n                StatCard(title: 'Weekly Goal', value: '5/7', highlightColor: AppColors.secondary),\\n                StatCard(title: 'Current Streak', value: '3 Days', highlightColor: AppColors.secondary),\\n                StatCard(title: 'Tasks Completed', value: '125', highlightColor: AppColors.secondary),\\n                StatCard(title: 'Journeys Active', value: '3', highlightColor: AppColors.secondary),\\n              ],\\n            ),\\n            const SizedBox(height: 32),\\n\\n            // Milestones Section\\n            Text(\\n              'Milestones Unlocked',\\n              style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 16),\\n            Wrap(\\n              spacing: 16,\\n              runSpacing: 16,\\n              children: _milestones.map((milestone) {\\n                return MilestoneBadge(\\n                  icon: milestone['icon'],\\n                  isUnlocked: milestone['unlocked'],\\n                  onTap: () => _showMilestoneMessage(milestone['message']),\\n                );\\n              }).toList(),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\\nclass StatCard extends StatelessWidget {\\n  final String title;\\n  final String value;\\n  final Color highlightColor;\\n\\n  const StatCard({\\n    super.key,\\n    required this.title,\\n    required this.value,\\n    required this.highlightColor,\\n  });\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n    return Card(\\n      child: Padding(\\n        padding: const EdgeInsets.all(16.0),\\n        child: Column(\\n          crossAxisAlignment: CrossAxisAlignment.start,\\n          mainAxisAlignment: MainAxisAlignment.spaceBetween,\\n          children: [\\n            Text(\\n              title,\\n              style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n            ),\\n            Text(\\n              value,\\n              style: textTheme.headlineMedium?.copyWith(color: highlightColor, fontWeight: FontWeight.bold),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\\nclass MilestoneBadge extends StatelessWidget {\\n  final IconData icon;\\n  final bool isUnlocked;\\n  final VoidCallback onTap;\\n\\n  const MilestoneBadge({\\n    super.key,\\n    required this.icon,\\n    required this.isUnlocked,\\n    required this.onTap,\\n  });\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return GestureDetector(\\n      onTap: onTap,\\n      child: Container(\\n        width: 70,\\n        height: 70,\\n        decoration: BoxDecoration(\\n          shape: BoxShape.circle,\\n          color: isUnlocked ? AppColors.primary.withOpacity(0.1) : AppColors.lightGrey.withOpacity(0.3),\\n          border: Border.all(\\n            color: isUnlocked ? AppColors.primary : AppColors.lightGrey,\\n            width: 2,\\n          ),\\n        ),\\n        child: Icon(\\n          icon,\\n          size: 36,\\n          color: isUnlocked ? AppColors.primary : AppColors.lightGrey,\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/screens/profile_settings_screen.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\n\\nclass ProfileSettingsScreen extends StatefulWidget {\\n  const ProfileSettingsScreen({super.key});\\n\\n  @override\\n  State<ProfileSettingsScreen> createState() => _ProfileSettingsScreenState();\\n}\\n\\nclass _ProfileSettingsScreenState extends State<ProfileSettingsScreen> {\\n  bool _notificationsEnabled = true;\\n  String _selectedTheme = 'Light'; // 'Light', 'Dark', 'System'\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: const Text('Profile & Settings'),\\n        automaticallyImplyLeading: false,\\n      ),\\n      body: ListView(\\n        padding: const EdgeInsets.all(16.0),\\n        children: [\\n          Text(\\n            'Account',\\n            style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n          ),\\n          const SizedBox(height: 16),\\n          _buildSettingsTile(\\n            context,\\n            title: 'Edit Profile',\\n            icon: Icons.person_outline,\\n            onTap: () {\\n              // TODO: Navigate to edit profile screen\\n            },\\n          ),\\n          _buildSettingsTile(\\n            context,\\n            title: 'Change Password',\\n            icon: Icons.lock_outline,\\n            onTap: () {\\n              // TODO: Navigate to change password screen\\n            },\\n          ),\\n          _buildSettingsTile(\\n            context,\\n            title: 'Logout',\\n            icon: Icons.logout,\\n            onTap: () {\\n              // TODO: Implement logout logic\\n            },\\n            isDestructive: true,\\n          ),\\n          const SizedBox(height: 32),\\n\\n          Text(\\n            'Preferences',\\n            style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n          ),\\n          const SizedBox(height: 16),\\n          SwitchListTile(\\n            title: Text(\\n              'Enable Notifications',\\n              style: textTheme.bodyLarge?.copyWith(color: AppColors.text),\\n            ),\\n            value: _notificationsEnabled,\\n            onChanged: (bool value) {\\n              setState(() {\\n                _notificationsEnabled = value;\\n              });\\n            },\\n            activeColor: AppColors.primary,\\n            tileColor: AppColors.white,\\n            shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),\\n            contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\\n          ),\\n          const SizedBox(height: 12),\\n          _buildSettingsTile(\\n            context,\\n            title: 'App Theme',\\n            icon: Icons.palette_outlined,\\n            trailing: Text(_selectedTheme, style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.7))),\\n            onTap: () {\\n              _showThemeSelectionDialog(context);\\n            },\\n          ),\\n          const SizedBox(height: 32),\\n\\n          Text(\\n            'About',\\n            style: textTheme.titleLarge?.copyWith(color: AppColors.text),\\n          ),\\n          const SizedBox(height: 16),\\n          _buildSettingsTile(\\n            context,\\n            title: 'Privacy Policy',\\n            icon: Icons.policy_outlined,\\n            onTap: () {\\n              // TODO: Open privacy policy\\n            },\\n          ),\\n          _buildSettingsTile(\\n            context,\\n            title: 'Terms of Service',\\n            icon: Icons.description_outlined,\\n            onTap: () {\\n              // TODO: Open terms of service\\n            },\\n          ),\\n          _buildSettingsTile(\\n            context,\\n            title: 'App Version',\\n            icon: Icons.info_outline,\\n            trailing: Text('1.0.0', style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.7))),\\n            onTap: () {\\n              // No action, just display version\\n            },\\n          ),\\n        ],\\n      ),\\n    );\\n  }\\n\\n  Widget _buildSettingsTile(BuildContext context, {\\n    required String title,\\n    required IconData icon,\\n    Widget? trailing,\\n    VoidCallback? onTap,\\n    bool isDestructive = false,\\n  }) {\\n    final textTheme = Theme.of(context).textTheme;\\n    final textColor = isDestructive ? AppColors.accent : AppColors.text;\\n\\n    return Card(\\n      margin: const EdgeInsets.only(bottom: 12),\\n      child: ListTile(\\n        leading: Icon(icon, color: textColor),\\n        title: Text(\\n          title,\\n          style: textTheme.bodyLarge?.copyWith(color: textColor),\\n        ),\\n        trailing: trailing ?? const Icon(Icons.arrow_forward_ios, size: 16, color: AppColors.text),\\n        onTap: onTap,\\n        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),\\n        contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 4),\\n      ),\\n    );\\n  }\\n\\n  void _showThemeSelectionDialog(BuildContext context) {\\n    showDialog(\\n      context: context,\\n      builder: (BuildContext context) {\\n        return AlertDialog(\\n          title: const Text('Select Theme'),\\n          content: Column(\\n            mainAxisSize: MainAxisSize.min,\\n            children: <Widget>[\\n              RadioListTile<String>(\\n                title: const Text('Light'),\\n                value: 'Light',\\n                groupValue: _selectedTheme,\\n                onChanged: (String? value) {\\n                  setState(() {\\n                    _selectedTheme = value!;\\n                  });\\n                  Navigator.of(context).pop();\\n                  // TODO: Apply theme change\\n                },\\n                activeColor: AppColors.primary,\\n              ),\\n              RadioListTile<String>(\\n                title: const Text('Dark'),\\n                value: 'Dark',\\n                groupValue: _selectedTheme,\\n                onChanged: (String? value) {\\n                  setState(() {\\n                    _selectedTheme = value!;\\n                  });\\n                  Navigator.of(context).pop();\\n                  // TODO: Apply theme change\\n                },\\n                activeColor: AppColors.primary,\\n              ),\\n              RadioListTile<String>(\\n                title: const Text('System Default'),\\n                value: 'System',\\n                groupValue: _selectedTheme,\\n                onChanged: (String? value) {\\n                  setState(() {\\n                    _selectedTheme = value!;\\n                  });\\n                  Navigator.of(context).pop();\\n                  // TODO: Apply theme change\\n                },\\n                activeColor: AppColors.primary,\\n              ),\\n            ],\\n          ),\\n        );\\n      },\\n    );\\n  }\\n}\\n\"\n  },\n  {\n    \"file\": \"lib/screens/add_edit_task_screen.dart\",\n    \"content\": \"import 'package:flutter/material.dart';\\nimport 'package:flutter_app/theme/app_colors.dart';\\n\\nclass AddEditTaskScreen extends StatefulWidget {\\n  final String? taskId; // Null for add, not null for edit\\n\\n  const AddEditTaskScreen({super.key, this.taskId});\\n\\n  @override\\n  State<AddEditTaskScreen> createState() => _AddEditTaskScreenState();\\n}\\n\\nclass _AddEditTaskScreenState extends State<AddEditTaskScreen> {\\n  final _formKey = GlobalKey<FormState>();\\n  final TextEditingController _titleController = TextEditingController();\\n  final TextEditingController _descriptionController = TextEditingController();\\n  String? _selectedJourney;\\n  DateTime _selectedDate = DateTime.now();\\n  TimeOfDay _selectedTime = TimeOfDay.now();\\n\\n  @override\\n  void initState() {\\n    super.initState();\\n    if (widget.taskId != null) {\\n      // TODO: Load existing task data for editing\\n      _titleController.text = 'Example Task Title';\\n      _descriptionController.text = 'This is an example description for an existing task.';\\n      _selectedJourney = 'Learn Flutter'; // Example existing journey\\n      _selectedDate = DateTime.now().add(const Duration(days: 1));\\n      _selectedTime = const TimeOfDay(hour: 9, minute: 0);\\n    }\\n  }\\n\\n  @override\\n  void dispose() {\\n    _titleController.dispose();\\n    _descriptionController.dispose();\\n    super.dispose();\\n  }\\n\\n  Future<void> _selectDate(BuildContext context) async {\\n    final DateTime? picked = await showDatePicker(\\n      context: context,\\n      initialDate: _selectedDate,\\n      firstDate: DateTime.now(),\\n      lastDate: DateTime(2101),\\n      builder: (context, child) {\\n        return Theme(\\n          data: Theme.of(context).copyWith(\\n            colorScheme: Theme.of(context).colorScheme.copyWith(\\n              primary: AppColors.primary, // Header background color\\n              onPrimary: AppColors.white, // Header text color\\n              onSurface: AppColors.text, // Body text color\\n            ),\\n            textButtonTheme: TextButtonThemeData(\\n              style: TextButton.styleFrom(\\n                foregroundColor: AppColors.primary, // Button text color\\n              ),\\n            ),\\n          ),\\n          child: child!,\\n        );\\n      },\\n    );\\n    if (picked != null && picked != _selectedDate) {\\n      setState(() {\\n        _selectedDate = picked;\\n      });\\n    }\\n  }\\n\\n  Future<void> _selectTime(BuildContext context) async {\\n    final TimeOfDay? picked = await showTimePicker(\\n      context: context,\\n      initialTime: _selectedTime,\\n      builder: (context, child) {\\n        return Theme(\\n          data: Theme.of(context).copyWith(\\n            colorScheme: Theme.of(context).colorScheme.copyWith(\\n              primary: AppColors.primary, // Header background color\\n              onPrimary: AppColors.white, // Header text color\\n              onSurface: AppColors.text, // Body text color\\n            ),\\n            textButtonTheme: TextButtonThemeData(\\n              style: TextButton.styleFrom(\\n                foregroundColor: AppColors.primary, // Button text color\\n              ),\\n            ),\\n          ),\\n          child: child!,\\n        );\\n      },\\n    );\\n    if (picked != null && picked != _selectedTime) {\\n      setState(() {\\n        _selectedTime = picked;\\n      });\\n    }\\n  }\\n\\n  void _saveTask() {\\n    if (_formKey.currentState?.validate() ?? false) {\\n      // TODO: Implement save/update task logic\\n      final taskData = {\\n        'title': _titleController.text,\\n        'description': _descriptionController.text,\\n        'journey': _selectedJourney,\\n        'dueDate': DateTime(_selectedDate.year, _selectedDate.month, _selectedDate.day, _selectedTime.hour, _selectedTime.minute),\\n      };\\n      print('Saving Task: $taskData');\\n      Navigator.of(context).pop(); // Close the screen\\n    }\\n  }\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    final textTheme = Theme.of(context).textTheme;\\n    final isEditing = widget.taskId != null;\\n\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: Text(isEditing ? 'Edit Task' : 'Add New Task'),\\n        leading: IconButton(\\n          icon: const Icon(Icons.close),\\n          onPressed: () => Navigator.of(context).pop(),\\n        ),\\n        actions: [\\n          if (isEditing)\\n            IconButton(\\n              icon: const Icon(Icons.delete_outline, color: AppColors.accent), // Delete icon for edit mode\\n              onPressed: () {\\n                // TODO: Implement delete task logic\\n                Navigator.of(context).pop();\\n              },\\n            ),\\n        ],\\n      ),\\n      body: Form(\\n        key: _formKey,\\n        child: ListView(\\n          padding: const EdgeInsets.all(16.0),\\n          children: [\\n            TextFormField(\\n              controller: _titleController,\\n              decoration: const InputDecoration(\\n                labelText: 'Task Title',\\n                hintText: 'e.g., Finish Flutter boilerplate',\\n              ),\\n              style: textTheme.bodyLarge?.copyWith(color: AppColors.text),\\n              validator: (value) {\\n                if (value == null || value.isEmpty) {\\n                  return 'Please enter a task title';\\n                }\\n                return null;\\n              },\\n            ),\\n            const SizedBox(height: 16),\\n            TextFormField(\\n              controller: _descriptionController,\\n              decoration: const InputDecoration(\\n                labelText: 'Description (Optional)',\\n                hintText: 'Add more details about your task...',\\n              ),\\n              maxLines: 3,\\n              style: textTheme.bodyMedium?.copyWith(color: AppColors.text),\\n            ),\\n            const SizedBox(height: 16),\\n            DropdownButtonFormField<String>(\\n              value: _selectedJourney,\\n              decoration: const InputDecoration(\\n                labelText: 'Associate with Journey (Optional)',\\n              ),\\n              items: <String>['Learn Flutter', 'Write a Novel', 'Run a Marathon', 'Personal Growth'] // Example journeys\\n                  .map<DropdownMenuItem<String>>((String value) {\\n                return DropdownMenuItem<String>(\\n                  value: value,\\n                  child: Text(value, style: textTheme.bodyMedium?.copyWith(color: AppColors.text)),\\n                );\\n              }).toList(),\\n              onChanged: (String? newValue) {\\n                setState(() {\\n                  _selectedJourney = newValue;\\n                });\\n              },\\n              style: textTheme.bodyMedium?.copyWith(color: AppColors.text),\\n              icon: const Icon(Icons.arrow_drop_down, color: AppColors.text),\\n            ),\\n            const SizedBox(height: 16),\\n            ListTile(\\n              title: Text(\\n                'Due Date',\\n                style: textTheme.bodyLarge?.copyWith(color: AppColors.text),\\n              ),\\n              subtitle: Text(\\n                '${_selectedDate.toLocal().year}-${_selectedDate.toLocal().month}-${_selectedDate.toLocal().day}',\\n                style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n              ),\\n              trailing: const Icon(Icons.calendar_today_outlined, color: AppColors.text),\\n              onTap: () => _selectDate(context),\\n              shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8)),\\n              tileColor: AppColors.background, // Use background color for list tile to match input fields\\n              contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\\n            ),\\n            const SizedBox(height: 12),\\n            ListTile(\\n              title: Text(\\n                'Due Time',\\n                style: textTheme.bodyLarge?.copyWith(color: AppColors.text),\\n              ),\\n              subtitle: Text(\\n                _selectedTime.format(context),\\n                style: textTheme.bodyMedium?.copyWith(color: AppColors.text.withOpacity(0.7)),\\n              ),\\n              trailing: const Icon(Icons.access_time_outlined, color: AppColors.text),\\n              onTap: () => _selectTime(context),\\n              shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8)),\\n              tileColor: AppColors.background,\\n              contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\\n            ),\\n            const SizedBox(height: 32),\\n            ElevatedButton(\\n              onPressed: _saveTask,\\n              child: Text(isEditing ? 'Save Changes' : 'Add Task'),\\n            ),\\n          ],\\n        ),\\n      ),\\n    );\\n  }\\n}\\n\"\n  }\n]\n```"
}